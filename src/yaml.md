# YAML for Generating UML Diagrams
\label{sec:yaml}

In this section, we present details of the text representation in YAML for the corresponding UML diagram.

\mfigure{120}{50}{src/img/innner-PackageDiagram}{Package diagram generated by description in YAML}{inner-PackageDiagram}

Fig. \ref{fig:inner-PackageDiagram} shows package diagrams and the corresponding inner representation in YAML. A package and a class are represented by a rectangle in the diagram. A package can include packages or classes. YAML has hash and list as data structures. In the YAML representation, a package or a class is represented by its hash, which has *package* or *class* key respectively. A *package* hash has its own *name* and *in* key which consists of a list of *packages* and *classes*. A *class* hash has a list of names of *classes*.

Fig. \ref{fig:inner-simpleClassDiagram} shows a class diagram and the corresponding inner representation in YAML. In the inner representation, a class hash has keys of *name*, *package* , *attributes* and *operations*.

\mfigureF{80}{40}{src/img/inner-SampleClass}{Class diagram generated by description in YAML}{inner-simpleClassDiagram}

Class diagrams generated by the visual modeling tools support the representation of *association*, *aggregation*, *composition*, *dependency*, *generalization* and *realization* in UML. Fig. \ref{fig:inner-aggregationClassDiagramm} shows a class diagram which has a relationship of *aggregation* and the corresponding inner representation. In order to include a relationship, the corresponding hash can be
defined in the YAML representation. The hash of a relationship has a list of *classes* as a value. Each class has a multiplicity hash as a value which represents its multiplicity.

\mfigure{90}{60}{src/img/inner-Aggregation}{Class diagram with an aggregation relationship}{inner-aggregationClassDiagramm}

Fig. \ref{fig:inner-generalizationClassDiagram} shows a class diagram which has relationships of *generalization* and the corresponding inner representation. In order to include such a relationship, the corresponding hash can be defined in the YAML representation. The hash of a relationship has a list of *classes* as a value.

\mfigure{120}{110}{src/img/inner-Generalization}{Class diagram with an generalization relationship}{inner-generalizationClassDiagram}

As an experimental system, algorithms to automatically generate the corresponding product packages and classes in Java have been developed and implemented in order to construct the visual modeling tools. Here, some details of the algorithms are presented. The algorithms generate products based on the intermediate representation in an AST. The intermediate representation in the AST is represented in a tree structure. A node of the tree structure corresponds to a package hash or a class hash
in YAML for generating UML diagrams. We developed a special parser to transform texts in YAML into a tree structure, where a package hash with a non-empty hash becomes an internal node and a class hash (and a package hash with an empty hash) becomes a leaf. A pre-order traversal scheme generates the corresponding directory structure.

In order to generate a class diagram from an intermediate representation, we use
an approach of template programs so that the generator can create products in different programming languages. Fig. \ref{fig:template-code} shows an example of a pair consisting of a template program and a product template code. The template program includes formal keywords enclosed by angle brackets to be replaced with real values defined in the internal representation.

\mfigureF{95}{50}{src/img/templateCodes}{Template program and product template code}{template-code}

Fig. \ref{fig:template-code} shows an example of template programs in Java. The important thing is that the modeling tools support template programs in different languages including Scala, C++, Ruby, and JavaScript. Beside, users can customize the template programs based on environment, coding rules, and preferences of the team.

